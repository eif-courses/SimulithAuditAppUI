@page "/Categories"
@attribute [Authorize]
@inject AuthenticationStateProvider authProvider
@inject IUserData userData
@inject IStringLocalizer<App> Localizer
@inject AuthenticationStateProvider authProvider
@inject IUserData userData
@inject ICategoryData categoryData
@inject NavigationManager navManager

@if (_categories != null)
{
<MudTextField @bind-Value="TextValue" Label="Standard" Variant="Variant.Text"></MudTextField>
<MudTextField @bind-Value="DescriptionText" T="string" Label="Outlined" Variant="Variant.Outlined" Placeholder="Description" Lines="3" />

    <MudButton OnClick="CreateCategory" Variant="Variant.Filled">Create category</MudButton>
    
    
    <MudButton OnClick="DeleteCategory" Color="Color.Error" Variant="Variant.Filled">Delete category</MudButton>
    <MudDataGrid Items="@_categories" MultiSelection="true" >
    <Columns>
        <SelectColumn T="CategoryModel" />
        <Column T="CategoryModel" Field="CategoryName" />
        <Column T="CategoryModel" Field="CategoryDescription" />
    </Columns>
</MudDataGrid>

}


@code {

   
    public string TextValue { get; set; }

    public string SomeValue { get; set; }


    public string DescriptionText { get; set; }

    private IEnumerable<CategoryModel> _categories = new List<CategoryModel>();

    protected async override Task OnInitializedAsync()
    {
        _categories = await categoryData.GetAllCategories();
    }


    private async Task CreateCategory(){
        // var loggedUser = authProvider.GetUserFromAuth(userData);

        CategoryModel category = new()
            {
                CategoryName = TextValue,
                CategoryDescription = DescriptionText

            };
        await categoryData.CreateCategory(category);
    }
    private async Task DeleteCategory()
    {
        await categoryData.DeleteCategory("Kuriam nauja2222");
    }



}




@* public string Id { get; set; }
    public string CategoryName { get; set; }
    public string CategoryDescription { get; set; }
  }*@